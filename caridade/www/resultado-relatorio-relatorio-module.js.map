{"version":3,"sources":["webpack:///./src/app/resultado/relatorio/relatorio.module.ts","webpack:///./src/app/resultado/relatorio/relatorio.page.html","webpack:///./src/app/resultado/relatorio/relatorio.page.scss","webpack:///./src/app/resultado/relatorio/relatorio.page.ts","webpack:///./src/app/services/api/doacao.service.ts"],"names":[],"mappings":"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","file":"resultado-relatorio-relatorio-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n//import { DoacaoService } from '../../services/api/doacao.service';\n\nimport { RelatorioPage } from './relatorio.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RelatorioPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [\n    RelatorioPage/*,\n    DoacaoService*/\n  ]\n})\nexport class RelatorioPageModule {}\n","module.exports = \"\\n<ion-content class=\\\"content-page\\\" scrollX=\\\"true\\\" scrollY=\\\"true\\\">\\n  <ion-header>\\n    <ion-row align-items-center>\\n      <ion-col size=\\\"4\\\">\\n        <img src=\\\"../../assets/img/logo_nsl.png\\\">\\n      </ion-col>\\n      <ion-col size=\\\"8\\\" color=\\\"blue\\\">\\n        <ion-label><h1>Relatório de Doações {{ nome }}</h1></ion-label>\\n      </ion-col>\\n    </ion-row>\\n  </ion-header>\\n  <div>\\n    <ion-item color=\\\"blue\\\">\\n      <ion-text>\\n        <h4>Quantidade de Produtos: {{ quanTotal }}</h4>\\n        <p></p>\\n      </ion-text>\\n    </ion-item>\\n  </div>\\n\\n  <div padding id=\\\"relatorio-layer\\\">\\n    <ion-row align-items-center>\\n      <ion-list lines=\\\"full\\\">\\n        <ion-item *ngFor=\\\"let doacao of allDoacoes\\\">\\n          <ion-label><h5>Produto: {{ doacao[1] }} qtd: {{ doacao[2] }}</h5></ion-label>\\n        </ion-item>\\n      </ion-list>\\n    </ion-row>\\n    <ion-row align-items-center>\\n      <ion-col>\\n        <ion-button expand=\\\"block\\\" class=\\\"cta\\\" color=\\\"orange\\\" (click)=\\\"backMenu()\\\">Voltar</ion-button>\\n      </ion-col>\\n    </ion-row>\\n  </div>\\n</ion-content>\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3Jlc3VsdGFkby9yZWxhdG9yaW8vcmVsYXRvcmlvLnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit, OnDestroy, Input, Output, EventEmitter } from '@angular/core';\nimport { LoadingController, AlertController } from '@ionic/angular';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { FormControl, FormGroup, FormGroupDirective, FormBuilder, NgForm, Validators } from '@angular/forms';\n\nimport { DoacaoService } from '../../services/api/doacao.service';\nimport { RegisterService } from '../../services/api/register.service';\n\n@Component({\n  selector: 'app-relatorio',\n  templateUrl: './relatorio.page.html',\n  styleUrls: ['./relatorio.page.scss'],\n})\nexport class RelatorioPage implements OnInit {\n\n  nome: string;\n  pesoTotal: number;\n  quanTotal: number;\n\n  private sub: any;\n  image: string;\n  customActionSheetOptions: any;\n\n  cod_intitution: number;\n  start_date: string;\n  end_date: string;\n\n  public allDoacoes: any;\n\n  isValidFormSubmitted = null;\n\n  relatorioForm: FormGroup;\n  codInstituicao:string='';\n\n  constructor(\n    public loadingController: LoadingController,\n    public alertController: AlertController,\n    public router: Router,\n    public route: ActivatedRoute,\n    //private formBuilder: FormBuilder,\n    public doacaoApi: DoacaoService) {\n\n      console.log('Passo 1');\n      this.image = \"./../../../assets/img/piggy-bank.svg\";\n\n  }\n\n  ngOnInit() {\n    this.sub = this.route.params.subscribe(params => {\n       this.cod_intitution = +params['codInstituicao'];\n       this.start_date = params['startDate'];\n       this.end_date = params['endDate'];\n       this.nome = params['nome'];\n     });\n\n     this.listaDoacoes();\n  }\n\n  ngOnDestroy() {\n    this.sub.unsubscribe();\n  }\n\n  listaDoacoes(): void {\n    console.log('DEBUG - cod_intitution: ', this.cod_intitution);\n    this.doacaoApi.getDoacoesPorPeriodo(this.cod_intitution, this.start_date, this.end_date)\n      .subscribe( (data: any) => {\n        this.allDoacoes = JSON.parse(JSON.stringify(data.relatorioDoacao));\n        this.somatoria();\n      }, err => {\n        console.log(err);\n\n      });\n  }\n\n  somatoria(){\n    this.quanTotal = 0;\n    this.pesoTotal = 0;\n    for (let index = 0; index < this.allDoacoes.length; index++) {\n      const element = this.allDoacoes[index];\n      this.quanTotal = this.quanTotal + element[2];\n      this.pesoTotal = this.pesoTotal + element[3];\n    }\n    if ( this.pesoTotal > 0 ){\n      this.pesoTotal = this.pesoTotal / 100;\n    }\n  }\n\n\n\n  logForm(){\n    this.backMenu();\n  }\n\n  backMenu(){\n    this.router.navigate(['menu']);\n  }\n\n}\n","import { NgModule, Component, Injectable } from \"@angular/core\";\nimport { Observable, of, throwError } from 'rxjs';\nimport { HttpClient, HttpHeaders, HttpErrorResponse } from '@angular/common/http';\nimport { catchError, tap, map } from 'rxjs/operators';\nimport { SERVER_URL } from \"../../../environments/environment\";\n\n\nconst httpOptions = {\n  headers: new HttpHeaders(\n    {'Content-Type': 'application/json',\n    'Access-Control-Allow-Origin': '*',\n    'Access-Control-Allow-Headers': 'Origin, X-Requested-With, Content-Type, Accept'})\n};\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DoacaoService {\n\n  constructor(private http: HttpClient) { }\n\n  getDoacoesPorPeriodo(codInstituicao, startDate, endDate): Observable<any> {\n    const url = `${SERVER_URL}/doacao/Periodo/`;\n\n    let body = {\n      codInstituicao: codInstituicao,\n      startDate: startDate,\n      endDate: endDate\n    };\n    console.log(\"*****BEGIN BODY***\");\n    console.log(body);\n    console.log(body.codInstituicao);\n    console.log(\"END BODY\");\n\n    return this.http.post(url, JSON.stringify(body), httpOptions)\n      .pipe(\n        tap(_ => console.log(`Doacoes encontradas`)),\n        catchError(this.handleError<any>('getDoacoesPorPeriodo'))\n      );\n  }\n\n  private handleError<T> (operation = 'operation', result?: T) {\n    return (error: any): Observable<T> => {\n\n      // TODO: send the error to remote logging infrastructure\n      console.error(error); // log to console instead\n\n      // Let the app keep running by returning an empty result.\n      return of(result as T);\n    };\n  }\n}\n"],"sourceRoot":""}